# Astmery 構文仕様書

## 1. 変数参照 (Variable Reference)
計算式やコマンド内で変数（ステータス、リソース）を使用する場合は、波括弧 `{}` で囲む必要があります。

*   **構文**: `{変数名}`
*   **例**:
    *   `2d6 + {肉体}`
    *   `({グレード} + {精神}) * 5`
    *   `2d6 + {攻撃} 命中判定`

## 2. 効果定義 (Effect Definitions)
スキルやアイテムの「効果」欄で定義します。複数の効果はスペースまたはカンマで区切ります。

### 2.1. 固定値補正 (Static Modifier)
ステータスに固定値を加算・減算します。
*   **構文**: `ステータス名+値` または `ステータス名-値`
*   **例**:
    *   `攻撃+1`
    *   `防護-2`

### 2.2. 動的補正 (Dynamic Modifier)
ステータスの値を計算式に基づいて設定します。
*   **構文**: `ステータス名:計算式`
*   **例**:
    *   `攻撃:{肉体}/2`
    *   `魔力:{精神}*2`

### 2.3. ステータス付与 (Grant Stat)
新しいカスタムステータスを定義します。
*   **構文**: `GrantStat:キー(ラベル)=初期値`
*   **例**:
    *   `GrantStat:karma(カルマ)=0`

### 2.4. リソース付与 (Grant Resource)
新しいリソースを定義します。
*   **構文**: `GrantResource:名前{max:最大値,min:最小値,init:初期値}`
*   **例**:
    *   `GrantResource:弾薬{max:10,min:0,init:10}`

## 3. チャットパレット / ダイスボット (Chat Palette / Dice Bot)
チャット欄やダイスパネルに入力するコマンドです。

### 3.1. ダイスロール (Dice Roll)
計算式を評価してダイスを振ります。
*   **構文**: `計算式 コメント`
*   **例**:
    *   `2d6+{攻撃} 攻撃判定`
    *   `1d100+{正気度} SANチェック`

### 3.2. リソース操作 (Resource Operation) ※計画中
リソースの現在値を変更します。セミコロン `;` で区切って複数の操作を同時に行えます。
*   **構文**: `:リソース名 演算子 値` または `:リソース名 演算子 値; リソース名 演算子 値`
*   **例**:
    *   `:HP-5` (HPを5減らす)
    *   `:MP+{回復量}` (MPを回復量分増やす)
    *   `:HP-5;MP-3` (HPを5減らし、かつMPを3減らす)
